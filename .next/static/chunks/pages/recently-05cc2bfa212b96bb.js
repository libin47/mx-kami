(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4612],{49868:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recently",function(){return c(42842)}])},92526:function(e,c,a){"use strict";a.d(c,{I:function(){return m}});var f=a(62086),g=a(51626),h=a(98034),b=a(93236),d=a(29712),i=a.n(d);function j(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function k(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){j(d,a,c[a])})}return d}var l=(0,b.createContext)({setFocus:function(a){}}),m=(0,b.memo)((0,b.forwardRef)(function(a,j){var c=a.prefix,m=a.value,n=a.onChange,o=a.multi,p=a.wrapperProps,q=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["prefix","value","onChange","multi","wrapperProps"]),r=(0,b.useState)(!1),u=r[0],v=r[1],s=(0,b.useRef)(null),t=(0,b.useState)({height:0,width:0}),e=t[0],w=t[1],d=(0,b.useMemo)(function(){return(e.height+e.width)*2},[e]);return(0,b.useEffect)(function(){requestAnimationFrame(function(){if(s.current){var a=s.current;w({height:a.clientHeight,width:a.clientWidth})}})},[s]),(0,f.jsxs)("span",k({},(0,h.Z)(a.wrapperProps,{className:(0,g.Z)(i()["input-wrap"],null==p?void 0:p.className)}),{ref:s,children:[c&&(0,f.jsx)("div",{className:i()["prefix-wrap"],children:c}),"number"==typeof d&&!!d&&(0,f.jsx)("div",{className:i().border,children:(0,f.jsx)("svg",{children:(0,f.jsx)("rect",{height:e.height,width:e.width,style:{strokeDasharray:"".concat(d,"px"),strokeDashoffset:u?void 0:"".concat(d,"px")},className:i().rect})})}),a.children?(0,f.jsx)(l.Provider,{value:{setFocus:function(a){v(a)}},children:a.children}):void 0!==o&&o?(0,f.jsx)("textarea",k({ref:j,value:m},q,{onFocus:function(c){var b;v(!0),null===(b=a.onFocus)|| void 0===b||b.call(a,c)},onBlur:function(c){var b;v(!1),null===(b=a.onBlur)|| void 0===b||b.call(a,c)},onChange:n,className:(0,g.Z)(i().input,c?i()["has-prefix"]:null)})):(0,f.jsx)("input",k({ref:j,value:m},q,{onFocus:function(c){var b;v(!0),null===(b=a.onFocus)|| void 0===b||b.call(a,c)},onBlur:function(c){var b;v(!1),null===(b=a.onBlur)|| void 0===b||b.call(a,c)},onChange:n,className:(0,g.Z)(i().input,c?i()["has-prefix"]:null)}))]}))}))},24277:function(e,b,a){"use strict";a.d(b,{g:function(){return i}});var f=a(62086),c=a(93236),g=a(32320),d=a(78091),h=a.n(d),i=(0,c.memo)(function(b){var d=b.loadingText,a=(0,c.useState)(!0),e=a[0],j=a[1],i=(0,g.YD)({threshold:.5,onChange:function(a){a?j(!1):j(!0)}}).ref;return(0,f.jsxs)("div",{className:h().loading,ref:i,children:[(0,f.jsx)("div",{className:"icon",children:(0,f.jsx)("svg",{className:"m-auto bg-transparent block",width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:(0,f.jsx)("circle",{cx:"50",cy:"51.3828",r:"13",fill:"#e15b64",children:!e&&(0,f.jsx)("animate",{attributeName:"cy",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keySplines:"0.45 0 0.9 0.55;0 0.45 0.55 0.9",keyTimes:"0;0.5;1",values:"23;77;23"})})})},"icon"),(0,f.jsx)("span",{children:d})]})})},42842:function(h,b,a){"use strict";a.r(b);var c=a(5702),i=a.n(c),j=a(62086),k=a(51626),l=a(20057),d=a(57397),e=a(93236),m=a(32320),f=a(59083),n=a(48337),o=a(92526),p=a(24277),q=a(93303),r=a(30097),s=a(94173),t=a(33531),u=a(11773),v=a(76226),g=a(85532),w=a.n(g);function x(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function y(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function z(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){y(g,e,f,d,h,"next",a)}function h(a){y(g,e,f,d,h,"throw",a)}d(void 0)})}}function A(a){return function(a){if(Array.isArray(a))return x(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||B(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(a,c){if(a){if("string"==typeof a)return x(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return x(a,c)}}var C=(0,e.memo)(function(){var a=(0,e.useState)(""),b=a[0],f=a[1],c=(0,e.useRef)(null),d=(0,e.useCallback)(function(){v.x.shorthand.proxy.post({data:{content:b}}).then(function(){f(""),c.current&&(c.current.value="")})},[b]);return(0,j.jsxs)("form",{action:"#",onSubmit:(0,e.useCallback)(function(a){a.preventDefault(),d()},[d]),children:[(0,j.jsx)(o.I,{multi:!0,ref:c,rows:4,required:!0,onChange:function(a){f(a.target.value)},autoFocus:!0,placeholder:"\u4ECA\u5929\u9047\u5230\u4E86\u4EC0\u4E48\u70E6\u5FC3\u4E8B?"}),(0,j.jsx)("div",{className:"mt-3 text-right",children:(0,j.jsx)("button",{className:"btn yellow",onClick:function(a){a.preventDefault(),d()},disabled:0===b.trim().length,children:"\u53D1\u9001"})})]})});b.default=(0,f.ri)((0,d.Pi)(function(){var x,b=(0,e.useState)(!0),c=b[0],F=b[1],d=(0,e.useState)([]),a=d[0],G=d[1],g=(0,e.useState)(!0),h=g[0],H=g[1],y=(0,t.oR)().userStore.isLogged;(0,e.useEffect)(function(){var b=function(b){a.unshift(b),G(A(a))},c=function(c){var d=c.id,b=a.findIndex(function(a){return a.id===d});-1!=b&&(a.splice(b,1),G(A(a)))};return f.YB.on(u.G.RECENTLY_CREATE,b),f.YB.on(u.G.RECENTLY_DElETE,c),function(){f.YB.off(u.G.RECENTLY_CREATE,b),f.YB.off(u.G.RECENTLY_DElETE,c)}},[a]);var I=(0,l.Z)((x=z(i().mark(function a(b){var c,d,e,f;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.before,d=b.size,e=void 0===d?10:d,F(!0),a.next=4,v.x.shorthand.getList(c,void 0,e);case 4:return(f=a.sent.data).length<10&&H(!1),F(!1),a.abrupt("return",f);case 8:case"end":return a.stop()}},a)})),function(a){return x.apply(this,arguments)}),1e3);(0,e.useEffect)(function(){var a;null===(a=I({}))|| void 0===a||a.then(function(a){G(a)})},[]);var B,o=(0,m.YD)(),D=o.ref,E=o.inView;(0,e.useEffect)(function(){if(E&&h){var b;null===(b=I({before:a[a.length-1].id}))|| void 0===b||b.then(function(a){G(function(b){return b.concat(a)})})}},[a,h,E]);var J=(B=z(i().mark(function a(b){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.x.shorthand.proxy(b).delete();case 2:case"end":return a.stop()}},a)})),function(a){return B.apply(this,arguments)});return(0,j.jsxs)("main",{className:"max-w-[50em] relative",children:[(0,j.jsx)("h1",{children:"\u52A8\u6001"}),(0,j.jsx)(s.p,{title:"\u52A8\u6001"}),(0,j.jsx)("h2",{className:"text-opacity-80",children:"\u8C22\u8C22\u4F60\u542C\u6211\u8BC9\u8BF4"}),y&&(0,j.jsx)(C,{}),(0,j.jsx)("div",{className:"pb-4"}),0===a.length&&c?(0,j.jsx)(p.g,{}):(0,j.jsxs)(e.Fragment,{children:[0==a.length?(0,j.jsx)("p",{className:"text-center",children:"\u8FD9\u91CC\u8FD8\u6CA1\u6709\u5185\u5BB9\u54E6"}):(0,j.jsx)("div",{className:w()["bubble-list"],children:a.map(function(a){return(0,j.jsxs)(e.Fragment,{children:[(0,j.jsxs)("div",{className:(0,k.Z)("bubble",y?"from-me":"from-them"),children:[(0,j.jsx)(q.U,{value:a.content}),(0,j.jsx)("div",{className:"text-sm float-right",children:(0,j.jsx)(r.i,{date:a.created})}),y&&(0,j.jsxs)("div",{className:"del",onClick:function(){return J(a.id)},children:[(0,j.jsx)(n.bH,{className:"mr-2"}),"\u5220\u9664"]})]}),(0,j.jsx)("div",{className:"clear-both"})]},a.id)})}),h&&(0,j.jsx)("div",{style:{height:"20px"},ref:D,children:c&&(0,j.jsx)(p.g,{})})]})]})}))},29712:function(a){a.exports={"input-wrap":"Input_input-wrap__moLd0",rect:"Input_rect__1L74p",border:"Input_border__bG35z",input:"Input_input__VVv0F","prefix-wrap":"Input_prefix-wrap__T6wPI"}},78091:function(a){a.exports={loading:"Loading_loading__7nOdi"}},85532:function(a){a.exports={"bubble-list":"recently_bubble-list__oT_im"}},46471:function(c,b,a){"use strict";a.d(b,{o:function(){return e}});var d=a(93236);function e(a){return(0,d.forwardRef)(function(e,f){var b,c;return a(e,(b=f,c=(0,d.useRef)(b&&b.current),(0,d.useEffect)(function(){b&&(b.current=c.current)},[b]),c))})}},17834:function(c,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a){return(0,e.default)(a),f.test(a)};var b,e=(b=d(65455))&&b.__esModule?b:{default:b},f=/^(0x|0h)?[0-9A-F]+$/i;c.exports=a.default,c.exports.default=a.default},71935:function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a){return(0,d.default)(a),(0,e.default)(a)&&24===a.length};var d=f(c(65455)),e=f(c(17834));function f(a){return a&&a.__esModule?a:{default:a}}b.exports=a.default,b.exports.default=a.default},65455:function(b,a){"use strict";function c(a){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a){if(!("string"==typeof a||a instanceof String)){var b=c(a);throw null===a?b="null":"object"===b&&(b=a.constructor.name),new TypeError("Expected a string but received a ".concat(b))}},b.exports=a.default,b.exports.default=a.default},12464:function(c,b,a){"use strict";a.d(b,{Z:function(){return k}});var d=Math.ceil,e=Math.max,f=function(a,g,c,h){for(var i=-1,b=e(d((g-a)/(c||1)),0),f=Array(b);b--;)f[h?b:++i]=a,a+=c;return f},g=a(61833),h=a(28106),i=1/0,j=function(a){return a?(a=(0,h.Z)(a))===i||a=== -i?(a<0?-1:1)*17976931348623157e292:a==a?a:0:0===a?a:0},k=function(c,a,b){return b&&"number"!=typeof b&&(0,g.Z)(c,a,b)&&(a=b=void 0),c=j(c),void 0===a?(a=c,c=0):a=j(a),b=void 0===b?c<a?1:-1:j(b),f(c,a,b,void 0)}}},function(a){a.O(0,[7364,5496,8337,3303,9774,2888,179],function(){return a(a.s=49868)}),_N_E=a.O()}])