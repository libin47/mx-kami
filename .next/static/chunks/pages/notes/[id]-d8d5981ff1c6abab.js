(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4245,426],{43832:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes/[id]",function(){return c(55244)}])},73968:function(c,b,a){"use strict";a.d(b,{i:function(){return j},x:function(){return k}});var d=a(62086),e=a(51626);function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){f(d,a,c[a])})}return d}function h(a,d){if(null==a)return{};var b,c,e=i(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}function i(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}var j=function(a){var b=a.className,c=h(a,["className"]);return(0,d.jsx)("hr",g({className:(0,e.Z)("border-0 h-[0.5px] my-4 !bg-opacity-30 bg-black dark:bg-white",b)},c))},k=function(a){var b=a.className,c=h(a,["className"]);return(0,d.jsx)("span",g({className:(0,e.Z)("!bg-opacity-30 bg-black dark:bg-white inline-block h-full mx-4 w-[0.5px] text-transparent",b)},c,{children:"w"}))}},21351:function(d,b,a){"use strict";a.d(b,{d:function(){return h}});var e=a(62086),f=a(51626),c=a(18288),g=a.n(c),h=function(a){var b=a.checked,c=a.width,d=a.className;return(0,e.jsx)("div",{className:(0,f.Z)(g()["like-button"],b?g().checked:"",d),children:(0,e.jsx)("label",{htmlFor:"checkbox",children:(0,e.jsx)("svg",{style:{width:c},id:"heart-svg",viewBox:"467 392 58 57",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsxs)("g",{id:"Group",fill:"none",fillRule:"evenodd",transform:"translate(467 392)",children:[(0,e.jsx)("path",{d:"M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z",id:"heart",fill:"currentColor"}),(0,e.jsx)("circle",{id:"main-circ",fill:"#E2264D",opacity:"0",cx:"29.5",cy:"29.5",r:"1.5"}),(0,e.jsxs)("g",{id:"grp7",opacity:"0",transform:"translate(7 6)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#9CD8C3",cx:"2",cy:"6",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#8CE8C3",cx:"5",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp6",opacity:"0",transform:"translate(0 28)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#CC8EF5",cx:"2",cy:"7",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#91D2FA",cx:"3",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp3",opacity:"0",transform:"translate(52 28)",children:[(0,e.jsx)("circle",{id:"oval2",fill:"#9CD8C3",cx:"2",cy:"7",r:"2"}),(0,e.jsx)("circle",{id:"oval1",fill:"#8CE8C3",cx:"4",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp2",opacity:"0",transform:"translate(44 6)",children:[(0,e.jsx)("circle",{id:"oval2",fill:"#CC8EF5",cx:"5",cy:"6",r:"2"}),(0,e.jsx)("circle",{id:"oval1",fill:"#CC8EF5",cx:"2",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp5",opacity:"0",transform:"translate(14 50)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#91D2FA",cx:"6",cy:"5",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#91D2FA",cx:"2",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp4",opacity:"0",transform:"translate(35 50)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#F48EA7",cx:"6",cy:"5",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#F48EA7",cx:"2",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp1",opacity:"0",transform:"translate(24)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#9FC7FA",cx:"2.5",cy:"3",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#9FC7FA",cx:"7.5",cy:"2",r:"2"})]})]})})})})}},54575:function(e,b,a){"use strict";a.d(b,{Z:function(){return h}});var f=a(62086),c=a(93236),d=a(2038),g=a.n(d),h=(0,c.memo)(function(a){return(0,f.jsx)(g(),{value:a.number,transition:500,className:a.className})})},89931:function(e,b,a){"use strict";a.d(b,{B:function(){return l}});var f=a(62086),g=a(51626),c=a(93236),h=a(85782),i=a(10298),d=a(12192),j=a.n(d);function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var l=(0,c.memo)(function(a){var b=a.actions,d=a.informs,e=a.copyright,l=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["actions","informs","copyright"]);return(0,f.jsxs)("div",{className:j().root,"data-hide-print":!0,children:[(0,f.jsxs)("div",function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){k(d,a,c[a])})}return d}({className:"note-inform space-x-3"},l,{children:[(void 0===d?[]:d).map(function(a,b){var d=(0,f.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[a.icon&&(0,f.jsx)("span",{className:"flex items-center mr-2",style:{color:a.color},children:a.icon}),a.name]});return(0,f.jsx)(c.Fragment,{children:a.tip?(0,f.jsx)(h.r,{triggerComponent:function(){return d},wrapperClassNames:"inline-flex items-center",children:m(a.tip)}):d},b)}),(void 0===e||e)&&(0,f.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",target:"_blank",className:"inline-flex items-center text-current cursor-pointer",children:(0,f.jsx)("span",{title:"\u521B\u4F5C\u5171\u7528\u4FDD\u7559\u7F72\u540D-\u975E\u5546\u4E1A-\u7981\u6B62\u6F14\u7ECE4.0\u56FD\u9645\u8BB8\u53EF\u8BC1",className:"inline-flex items-center",children:(0,f.jsx)(i.w2,{})})})]})),(0,f.jsx)("div",{className:"note-action min-h-4 space-x-4",children:(void 0===b?[]:b).map(function(a,b){if(!a)return null;var d=a.wrapperComponent||c.Fragment,e=(0,f.jsx)("span",{className:(0,g.Z)(!!a.callback&&"cursor-pointer","inline-flex items-center space-x-2"),onClick:a.callback,children:(0,f.jsxs)(d,{children:[a.icon&&(0,f.jsx)("span",{className:"inline-flex items-center",style:{color:a.color},children:a.icon}),a.name]})});return(0,f.jsx)(c.Fragment,{children:a.tip?(0,f.jsx)(h.r,{triggerComponent:function(){return e},wrapperClassNames:"inline-flex items-center",children:m(a.tip)}):e},b)})})]})}),m=function(a){return"function"==typeof a?(0,c.createElement)(a):a}},46992:function(d,b,a){"use strict";a.d(b,{E:function(){return j}});var e=a(62086),c=a(93236),f=a(48629),g=a(85782),h=a(27625),i=a(92644),j=(0,c.memo)(function(d){var a=(0,i.LU)().function.donate.qrcode,b=void 0===a?[]:a,j=(0,c.useMemo)(function(){return(0,e.jsx)(e.Fragment,{children:d.children})},[d.children]);return b.length?(0,e.jsx)(g.r,{wrapperClassNames:"inline-flex items-center",middleware:[(0,f.X5)({autoAlignment:!0}),(0,f.uY)(),(0,f.cv)(10),],triggerComponent:function(){return j},children:(0,e.jsx)(h.X,{trackerMessage:"\u66DD\u5149 - \u8D44\u52A9\u5F39\u5C42",children:(0,e.jsx)("div",{className:"flex space-x-2",children:b.map(function(a){return(0,e.jsx)("img",{src:a,className:"w-[300px]"})})})})}):j})},55244:function(m,c,a){"use strict";a.r(c),a.d(c,{"default":function(){return aP}});var e=a(4544),f=a.n(e),n=a(62086),g=a(71384),o=a.n(g),p=a(50279),q=a(18081),r=a(19360),b=a(67201),s=a(95930),h=a(93236),t=a(39137),u=a(64654),v=a(9378),w=a(12335),x=a(45595),y=a(10298),z=a(21351),A=a(54575),B=a(58443),C=a(89931),D=a(46992);function E(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function F(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){E(d,a,c[a])})}return d}function G(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm-160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm194.8 170.2C334.3 380.4 292.5 400 248 400s-86.3-19.6-114.8-53.8c-13.6-16.3 11-36.7 24.6-20.5c22.4 26.9 55.2 42.2 90.2 42.2s67.8-15.4 90.2-42.2c13.4-16.2 38.1 4.2 24.6 20.5z"})}))}function H(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256c0 90.1 48.2 168.7 120 212.1V288c0-8.8 7.2-16 16-16s16 7.2 16 16v196.7c29.5 12.4 62 19.3 96 19.3s66.5-6.9 96-19.3V288c0-8.8 7.2-16 16-16s16 7.2 16 16v180.1C447.8 424.7 496 346 496 256C496 119 385 8 248 8zm-65.5 216.5c-14.8-13.2-46.2-13.2-61 0L112 233c-3.8 3.3-9.3 4-13.7 1.6c-4.4-2.4-6.9-7.4-6.1-12.4c4-25.2 34.2-42.1 59.9-42.1S208 197 212 222.2c.8 5-1.7 10-6.1 12.4c-5.8 3.1-11.2.7-13.7-1.6l-9.7-8.5zM248 416c-26.5 0-48-28.7-48-64s21.5-64 48-64s48 28.7 48 64s-21.5 64-48 64zm149.8-181.5c-5.8 3.1-11.2.7-13.7-1.6l-9.5-8.5c-14.8-13.2-46.2-13.2-61 0L304 233c-3.8 3.3-9.3 4-13.7 1.6c-4.4-2.4-6.9-7.4-6.1-12.4c4-25.2 34.2-42.1 59.9-42.1S400 197 404 222.2c.6 4.9-1.8 9.9-6.2 12.3z"})}))}function I(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zM152 416c-26.5 0-48-21-48-47c0-20 28.5-60.4 41.6-77.8c3.2-4.3 9.6-4.3 12.8 0C171.5 308.6 200 349 200 369c0 26-21.5 47-48 47zm16-176c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm170.2 154.2C315.8 367.4 282.9 352 248 352c-21.2 0-21.2-32 0-32c44.4 0 86.3 19.6 114.7 53.8c13.8 16.4-11.2 36.5-24.5 20.4z"})}))}function J(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM136 240c0-9.3 4.1-17.5 10.5-23.4l-31-9.3c-8.5-2.5-13.3-11.5-10.7-19.9c2.5-8.5 11.4-13.2 19.9-10.7l80 24c8.5 2.5 13.3 11.5 10.7 19.9c-2.1 6.9-8.4 11.4-15.3 11.4c-.5 0-1.1-.2-1.7-.2c.7 2.7 1.7 5.3 1.7 8.2c0 17.7-14.3 32-32 32S136 257.7 136 240zm168 154.2c-27.8-33.4-84.2-33.4-112.1 0c-13.5 16.3-38.2-4.2-24.6-20.5c20-24 49.4-37.8 80.6-37.8s60.6 13.8 80.6 37.8c13.8 16.5-11.1 36.6-24.5 20.5zm76.6-186.9l-31 9.3c6.3 5.8 10.5 14.1 10.5 23.4c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-2.9.9-5.6 1.7-8.2c-.6.1-1.1.2-1.7.2c-6.9 0-13.2-4.5-15.3-11.4c-2.5-8.5 2.3-17.4 10.7-19.9l80-24c8.4-2.5 17.4 2.3 19.9 10.7c2.5 8.5-2.3 17.4-10.8 19.9z"})}))}function K(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm33.8 189.7l80-48c11.6-6.9 24 7.7 15.4 18L343.6 208l33.6 40.3c8.7 10.4-3.9 24.8-15.4 18l-80-48c-7.7-4.7-7.7-15.9 0-20.6zm-163-30c-8.6-10.3 3.8-24.9 15.4-18l80 48c7.8 4.7 7.8 15.9 0 20.6l-80 48c-11.5 6.8-24-7.6-15.4-18l33.6-40.3l-33.6-40.3zM248 288c51.9 0 115.3 43.8 123.2 106.7c1.7 13.6-8 24.6-17.7 20.4c-25.9-11.1-64.4-17.4-105.5-17.4s-79.6 6.3-105.5 17.4c-9.8 4.2-19.4-7-17.7-20.4C132.7 331.8 196.1 288 248 288z"})}))}function L(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm-80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm176 192H152c-21.2 0-21.2-32 0-32h192c21.2 0 21.2 32 0 32zm-16-128c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"})}))}function M(a){return(0,n.jsx)("svg",F({width:"1em",height:"1em",viewBox:"0 0 512 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M409.6 111.9c22.6-3.2 73.5-12 88.3-26.8c19.2-19.2 18.9-50.6-.7-70.2S446-5 426.9 14.2c-14.8 14.8-23.5 65.7-26.8 88.3c-.8 5.5 3.9 10.2 9.5 9.4zM102.4 400.1c-22.6 3.2-73.5 12-88.3 26.8c-19.1 19.1-18.8 50.6.8 70.2s51 19.9 70.2.7c14.8-14.8 23.5-65.7 26.8-88.3c.8-5.5-3.9-10.2-9.5-9.4zm311.7-256.5c-33 3.9-48.6-25.1-45.7-45.7c3.4-24 7.4-42.1 11.5-56.5C285.1-13.4 161.8-.5 80.6 80.6C-.5 161.7-13.4 285 41.4 379.9c14.4-4.1 32.4-8 56.5-11.5c33.2-3.9 48.6 25.2 45.7 45.7c-3.4 24-7.4 42.1-11.5 56.5c94.8 54.8 218.1 41.9 299.3-39.2s94-204.4 39.2-299.3c-14.4 4.1-32.5 8-56.5 11.5zM255.7 106c3.3-13.2 22.4-11.5 23.6 1.8l4.8 52.3l52.3 4.8c13.4 1.2 14.9 20.3 1.8 23.6l-90.5 22.6c-8.9 2.2-16.7-5.9-14.5-14.5l22.5-90.6zm-90.9 230.3L160 284l-52.3-4.8c-13.4-1.2-14.9-20.3-1.8-23.6l90.5-22.6c8.8-2.2 16.7 5.8 14.5 14.5L188.3 338c-3.1 13.2-22.2 11.7-23.5-1.7zm215.7 44.2c-29.3 29.3-75.7 50.4-116.7 50.4c-18.9 0-36.6-4.5-51-14.7c-9.8-6.9-8.7-21.8 2-27.2c28.3-14.6 63.9-42.4 97.8-76.3s61.7-69.6 76.3-97.8c5.4-10.5 20.2-11.9 27.3-2c32.3 45.3 7.1 124.7-35.7 167.6z"})}))}function N(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM136 208c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32zm187.3 183.3c-31.2-9.6-59.4-15.3-75.3-15.3s-44.1 5.7-75.3 15.3c-11.5 3.5-22.5-6.3-20.5-18.1c7-40 60.1-61.2 95.8-61.2s88.8 21.3 95.8 61.2c2 11.9-9.1 21.6-20.5 18.1zM328 240c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"})}))}function O(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM144 400h-8c-17.7 0-32-14.3-32-32v-8h40v40zm0-56h-40v-8c0-17.7 14.3-32 32-32h8v40zm-8-136c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32zm72 192h-48v-40h48v40zm0-56h-48v-40h48v40zm64 56h-48v-40h48v40zm0-56h-48v-40h48v40zm64 56h-48v-40h48v40zm0-56h-48v-40h48v40zm-8-104c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm64 128c0 17.7-14.3 32-32 32h-8v-40h40v8zm0-24h-40v-40h8c17.7 0 32 14.3 32 32v8z"})}))}function P(a){return(0,n.jsx)("svg",F({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,n.jsx)("path",{fill:"currentColor",d:"M344 200c-13.3 0-24 10.7-24 24s10.7 24 24 24s24-10.7 24-24s-10.7-24-24-24zm-192 0c-13.3 0-24 10.7-24 24s10.7 24 24 24s24-10.7 24-24s-10.7-24-24-24zM248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM80 224c0-39.8 32.2-72 72-72s72 32.2 72 72s-32.2 72-72 72s-72-32.2-72-72zm232 176H184c-21.2 0-21.2-32 0-32h128c21.2 0 21.2 32 0 32zm32-104c-39.8 0-72-32.2-72-72s32.2-72 72-72s72 32.2 72 72s-32.2 72-72 72z"})}))}var Q=a(72809),R=function(a){var b={晴:Q.z,多云:y.T$,阴:y.cA,雪:y.bm,雨:y.DR,雷雨:y.e8};return h.createElement(b[a]||Q.z)},S=a(10609),T=a(74321),U=a(92644),V=a(38325);function W(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var X=(0,b.Pi)(function(j){var f,c,k=j.id,g=(0,V.oR)().noteStore,a=g.get(k),q=(0,h.useRef)(!1),r=(0,T.e)().event;if(!a)return null;var l=a.nid,d=a.mood,e=a.weather,m=!!a.secret&&o()(a.secret).isAfter(new Date),i=g.isLiked(l),p=(0,U.LU)().function.donate,b={informs:[],actions:[p.enable&&{icon:(0,n.jsx)(y.j,{fontSize:"1.2em"}),name:"",wrapperComponent:D.E,callback:function(){window.open(p.link)}},{name:(0,n.jsxs)("div",{className:"inline-flex items-center leading-[1]",children:[(0,n.jsx)("div",{className:"h-[1rem] w-[1rem] relative mr-2",children:(0,n.jsx)(z.d,{checked:i,width:"2rem",className:"absolute inset-0 -translate-y-1/2 -translate-x-1/2 transform "})}),(0,n.jsx)(A.Z,{number:(null===(c=a.count)|| void 0===c?void 0:c.like)||0,className:"ml-4"})]}),color:i?"#e74c3c":void 0,callback:function(){g.like(l),q.current||(r({action:S.b.Interaction,label:"\u65E5\u8BB0\u5E95\u90E8\u559C\u6B22\u89E6\u53D1"}),q.current=!0)}},]};return e&&b.informs.push({name:e,icon:R(e)}),d&&b.informs.push({name:d,icon:(f=d,h.createElement({开心:G,伤心:I,大哭:H,生气:J,痛苦:K,悲哀:L,不快:L,激动:M,担心:N,可怕:O,可恶:J,绝望:N,焦虑:P}[f]||G))}),b.informs.push({name:(0,n.jsx)(B.i,{date:a.created}),icon:(0,n.jsx)(y.a4,{}),tip:function(){return(0,n.jsxs)("p",{className:"leading-7",children:["\u521B\u5EFA\u65F6\u95F4\uFF1A",a.created,(0,n.jsx)("br",{}),"\u4FEE\u6539\u4E8E\uFF1A",a.modified||"-"]})}},{name:a.count.read.toString(),icon:(0,n.jsx)(y.NM,{})}),(0,n.jsx)(n.Fragment,{children:!m&&(0,n.jsx)(C.B,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){W(d,a,c[a])})}return d}({},b))})}),Y=a(55883);function Z(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}var $=(0,b.Pi)(function(f){var a,b,g=f.id,h=(0,V.oR)().noteStore,c=(a=h.relationMap.get(g)||[Y.Z,Y.Z],b=2,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||function(a,c){if(a){if("string"==typeof a)return Z(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return Z(a,c)}}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],e=c[1],i=(0,s.useRouter)(),j=(0,T.e)().event;return(0,n.jsx)(n.Fragment,{children:(!!e||!!d)&&(0,n.jsxs)("section",{className:"mt-4 text-center",children:[!!e&&(0,n.jsx)("button",{className:"btn green",onClick:function(){i.push("/notes/[id]","/notes/".concat(e.nid))},children:"\u524D\u4E00\u7BC7"}),(0,n.jsx)("button",{className:"btn yellow",onClick:function(){var a=h.get(g);j({action:S.b.Click,label:"\u65F6\u95F4\u7EBF\u70B9\u51FB - ".concat(null==a?void 0:a.nid," - ").concat(null==a?void 0:a.title)}),(0,w.YG)(),i.push("/timeline?type=note")},children:"\u65F6\u95F4\u7EBF"}),!!d&&(0,n.jsx)("button",{className:"btn green",onClick:function(){i.push("/notes/[id]","/notes/".concat(d.nid))},children:"\u540E\u4E00\u7BC7"})]})})}),_=a(72726),aa=function(b){var a=(0,h.useRef)(null);return(0,n.jsxs)("div",{className:"flex h-full w-full absolute items-center justify-center flex-col",children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{className:"font-medium text-2xl",children:"\u6B64\u6587\u7AE0\u9700\u8981\u5BC6\u7801"})}),(0,n.jsxs)("div",{className:"space-x-3 text-center space-y-3",children:[(0,n.jsx)(_.I,{ref:a,type:"password"}),(0,n.jsx)("button",{className:"btn yellow flex-shrink-0",onClick:function(){a.current&&b.onSubmit(a.current.value)},children:"\u63D0\u4EA4"})]})]})},i=a(37937),ab=a.n(i),ac=a(32468),ad=a(44199),ae=a(73968),af=a(85782),ag=a(27625),ah=function(a){if(!a)return"";var b=a.split(" ")[0];return b.length>4?a[0]:b},ai=a(32872),aj=function(g){var c,a=g.topic,i=a.id,d=(0,h.useState)([]),b=d[0],j=d[1],e=(0,h.useState)(),f=e[0],k=e[1];return(0,h.useEffect)(function(){ai.x1.note.getNoteByTopicId(i,1,1,{sortBy:"created",sortOrder:-1}).then(function(a){var b=a.data,c=a.pagination;j(b),k(c)})},[i]),(0,n.jsxs)("div",{className:"flex flex-col w-[400px]",children:[(0,n.jsx)(ab(),{href:"/notes/topics/".concat(a.slug),children:(0,n.jsx)("a",{children:(0,n.jsx)("h1",{className:"text-lg font-medium !m-0 py-2",children:a.name})})}),(0,n.jsx)("p",{className:"break-all line-clamp-2 text-gray-2",children:(0,n.jsx)(ac.Z,{children:a.introduce})}),a.description&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ae.i,{}),(0,n.jsx)("p",{className:"text-gray-1 leading-8",children:(0,n.jsx)(ac.Z,{children:a.description})})]}),b[0]&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ae.i,{}),(0,n.jsxs)("p",{className:"flex items-center",children:[(0,n.jsx)(y.xW,{}),(0,n.jsx)(ae.x,{}),(0,n.jsx)("span",{className:"flex-shrink-0",children:"\u6700\u8FD1\u66F4\u65B0"}),(0,n.jsx)(ae.x,{}),(0,n.jsxs)("span",{className:"flex-shrink inline-flex min-w-0",children:[(0,n.jsx)(ab(),{href:"/notes/".concat(b[0].nid),children:(0,n.jsx)("a",{className:"truncate",children:null===(c=b[0])|| void 0===c?void 0:c.title})}),(0,n.jsxs)("span",{className:"flex-shrink-0",children:["\uFF08",(0,n.jsx)(B.i,{date:b[0].modified||b[0].created,displayAbsoluteTimeAfterDay:1/0}),"\uFF09"]})]})]})]}),(0,n.jsx)(ae.i,{}),(0,n.jsxs)("p",{className:"flex items-center",children:[(0,n.jsx)(y.VK,{}),(0,n.jsx)(ae.x,{}),"\u5171\u6709\u6587\u7AE0\uFF1A",null==f?void 0:f.total," \u7BC7"]})]})},ak=function(c){var a=c.topic,d=a.icon,b=a.name,e=a.introduce,f=(0,T.e)().event,g=(0,h.useCallback)(function(){f({action:S.b.Click,label:"\u8BDD\u9898\u70B9\u51FB \u8FDB\u5165\u8BE6\u60C5 / ".concat(b)})},[b]);return(0,n.jsx)(ag.X,{action:S.b.Impression,trackerMessage:"\u66DD\u5149\u5E95\u90E8\u8BDD\u9898 - ".concat(a.name),children:(0,n.jsxs)("div",{"data-hide-print":!0,children:[(0,n.jsx)("div",{className:"text-md",children:(0,n.jsx)("strong",{children:"\u6587\u7AE0\u88AB\u4E13\u680F\u6536\u5F55\uFF1A"})}),(0,n.jsx)(ae.i,{}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(ad.q,{size:60,imageUrl:d,text:ah(b),className:"flex-shrink-0",useRandomColor:!1,shadow:!1,wrapperProps:(0,h.useMemo)(function(){return{className:"text-white dark:text-opacity-80"}},[])}),(0,n.jsxs)("div",{className:"flex-grow flex flex-col self-start",children:[(0,n.jsx)("span",{className:"text-md font-medium mb-2",children:(0,n.jsx)(af.r,{strategy:"absolute",triggerComponent:function(){return(0,n.jsx)(ab(),{href:"/notes/topics/".concat(a.slug),onClick:g,children:(0,n.jsx)("a",{children:(0,n.jsx)("span",{children:b})})})},children:(0,n.jsx)(ag.X,{trackerMessage:"\u66DD\u5149 - \u5185\u9875\u8BDD\u9898 - ".concat(a.name),action:S.b.Impression,children:(0,n.jsx)(aj,{topic:a})})})}),(0,n.jsx)("p",{className:"opacity-80 text-shizuku-text text-sm line-clamp-2",children:(0,n.jsx)(ac.Z,{children:e})})]})]})]})})},al=a(20444),am=(0,b.Pi)(function(b){var c=(0,V.oR)().userStore.isLogged,a=(0,h.useState)(!1),d=a[0],i=a[1],e=(0,h.useRef)(null),f=(0,T.e)().event,g=(0,s.useRouter)();return(0,h.useEffect)(function(){if(e.current){var a=e.current;return a.oncopy=function(a){c||(a.preventDefault(),i(!0),f({action:S.b.Interaction,label:"\u7981\u6B62\u590D\u5236\u89E6\u53D1\uFF0C\u5728 ".concat(g.asPath)}))},function(){a.oncopy=null}}},[f,c,g.asPath]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:e,children:b.children}),(0,n.jsxs)(al.v,{onClose:function(){i(!1)},show:d,center:!0,children:[(0,n.jsx)("h1",{className:"mt-0 text-red pointer-events-none",children:"\u6CE8\u610F: "}),(0,n.jsx)("div",{className:"my-3 text-white text-opacity-80 pointer-events-none",children:(0,n.jsx)("p",{children:"\u672C\u6587\u7AE0\u4E3A\u7AD9\u957F\u539F\u521B, \u4FDD\u7559\u7248\u6743\u6240\u6709, \u7981\u6B62\u590D\u5236."})})]})]})}),an=a(8419),ao=a(51626),ap=a(22351),aq=a(96308),ar=a(9987),j=a(175),as=a.n(j),at=(0,b.Pi)(function(e){var b,c,d,j=e.className,f=e.noteId,k=(0,V.oR)().noteStore,a=k.get(f),g=(0,h.useState)([]),i=g[0],m=g[1],o=(0,aq.Z)(i);(0,h.useEffect)(function(){x.x.note.getMiddleList(f,10).then(function(a){m(a.data)})},[f]);var p=(0,T.e)().event,l=(0,h.useCallback)(function(){var b,c;return(0,n.jsx)(ab(),{href:"/notes/topics/".concat(null==a?void 0:null===(b=a.topic)|| void 0===b?void 0:b.slug),onClick:function(){var b;return p({action:S.b.Click,label:"\u5DE6\u4FA7\u65F6\u95F4\u7EBF\u70B9\u51FB\u53BB\u8BDD\u9898\u9875 - ".concat(null==a?void 0:null===(b=a.topic)|| void 0===b?void 0:b.name)})},children:(0,n.jsx)("a",{children:(0,n.jsx)("span",{className:"flex-grow truncate",children:null==a?void 0:null===(c=a.topic)|| void 0===c?void 0:c.name})})})},[null==a?void 0:null===(b=a.topic)|| void 0===b?void 0:b.name,null==a?void 0:null===(c=a.topic)|| void 0===c?void 0:c.slug]);return(0,n.jsx)("div",{className:(0,ao.Z)(j,as().container),children:(0,n.jsxs)("div",{className:(0,ao.Z)(as().list),children:[(0,n.jsx)(ap.Z,{component:"ul",children:i.map(function(a,b){return(0,n.jsx)(ar._,{component:"li",timeout:{enter:(null==o?void 0:o.length)?100*Math.abs(o.length-b):100*b},children:(0,n.jsx)(ab(),{href:"/notes/".concat(a.nid),children:(0,n.jsx)("a",{className:(0,ao.Z)(a.id===e.noteId?as().active:null,as().item),children:a.title})},a.id)},a.id)})}),(null==a?void 0:a.topic)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ae.i,{className:"!w-3/4"}),(0,n.jsxs)("p",{className:"text-gray-1 flex flex-col min-w-0 overflow-hidden",children:["\u6B64\u6587\u7AE0\u6536\u5F55\u4E8E\u4E13\u680F\uFF1A",(0,n.jsx)("br",{}),(0,n.jsx)(af.r,{placement:"right",strategy:"fixed",wrapperClassNames:"flex flex-grow flex-shrink min-w-0",triggerComponent:l,children:(0,n.jsx)(ag.X,{trackerMessage:"\u66DD\u5149 - \u5DE6\u4FA7\u65F6\u95F4\u7EBF\u8BDD\u9898\u5185\u9875\u5C55\u5F00 - ".concat(null==a?void 0:null===(d=a.topic)|| void 0===d?void 0:d.name),action:S.b.Impression,children:(0,n.jsx)(aj,{topic:null==a?void 0:a.topic})})})]})]})]})})});function au(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}var av=(0,b.Pi)((0,h.forwardRef)(function(a,l){var m,p=a.date,b=a.id,v=a.title,q=a.tips,r=a.children,s=o()(p).locale("cn").format("YYYY\u5E74M\u6708D\u65E5 dddd"),g=(0,V.oR)(),i=g.userStore,d=i.isLogged,j=i.url,t=g.noteStore,c=t.get(b),e=null==c?void 0:c.hasMemory,k=(0,h.useCallback)((m=f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.x.note.proxy(b).patch({data:{hasMemory:!e}});case 2:case"end":return a.stop()}},a)}),function(){var a=this,b=arguments;return new Promise(function(d,e){var f=m.apply(a,b);function c(a){au(f,d,e,c,g,"next",a)}function g(a){au(f,d,e,c,g,"throw",a)}c(void 0)})}),[e,b]),u=!!globalThis.location&&location.hash;return(0,n.jsxs)("main",{className:"max-w-[50em] relative is-note",ref:l,children:[(0,n.jsx)(ar._,{id:b,in:!0,appear:!u,mountOnEnter:!0,unmountOnExit:!0,timeout:0,children:(0,n.jsxs)("div",{className:"note-article relative",children:[(0,n.jsx)("div",{className:"title-headline text-light-brown dark:text-shizuku-text",children:(0,n.jsxs)("span",{className:"inline-flex items-center",children:[(0,n.jsx)("time",{className:"font-medium",children:s}),(0,n.jsxs)("div",{className:"ml-4 inline-flex space-x-2 items-center",children:[d?e?(0,n.jsx)(y.CK,{className:"text-red cursor-pointer",onClick:k}):(0,n.jsx)(y.aJ,{className:"cursor-pointer",onClick:k}):e?(0,n.jsx)(y.CK,{className:"text-red"}):null,(null==c?void 0:c.hide)&&(0,n.jsx)(y.hb,{className:d?"":"text-red"})]})]})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-center !mt-8 !before:hidden headline text-brown dark:text-shizuku-text",children:[(0,n.jsx)(af.r,{triggerComponent:function(){return(0,n.jsx)(n.Fragment,{children:v})},placement:"bottom",children:q}),d&&j?(0,n.jsx)("a",{className:"edit-link",target:"_blank",href:(0,ai.Kk)("#/notes/edit?id=".concat(b),j.adminUrl),children:"\u7F16\u8F91"}):null]}),r]})]})}),(0,n.jsx)(at,{noteId:b})]})})),aw=a(68946),ax=a(9258),ay=a(821),az=a(44742),aA=a(61837),aB=function(){(0,h.useEffect)(function(){(0,ai.Wx)("https://fonts.loli.net/css?family=Noto+Serif+SC&display=swap")},[])},aC=function(a){var b=(0,V.oR)().musicStore;(0,h.useEffect)(function(){if(a){if(0===a.length){b.empty();return}return b.setPlaylist(a),b.setHide(!1),function(){b.empty(),b.setHide(!0)}}},[a])},aD=function(a){aC((0,h.useMemo)(function(){return a&&Array.isArray(a)&&a.length>0?a.filter(function(a){return a.id&&"netease"===a.type}).map(function(a){return~~a.id}):null},[a]))},aE=a(58276),aF=a(52861),aG=a(14302),aH=a(93922),aI=a(73508);function aJ(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function k(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){aJ(g,e,f,d,h,"next",a)}function h(a){aJ(g,e,f,d,h,"throw",a)}d(void 0)})}}function aK(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aL(b,a){return null!=a&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](b):b instanceof a}a(85591);var l,aM=function(b){var a=V.h.noteStore.get(b),c=(0,h.useRef)(),d=(0,T.e)().event;(0,h.useEffect)(function(){var e="\u6B64\u751F\u6D3B\u8BB0\u5F55\u5DF2\u88AB\u4F5C\u8005\u5220\u9664\u6216\u9690\u85CF";if(null==a?void 0:a.isDeleted){t.yw.error(e);return}var b=c.current;if(!b&&a){c.current=(0,r.ZN)(a);return}if(!(!b||!a||(0,p.Z)(b,(0,r.ZN)(a)))){if(b.id===a.id){if(a.hide&&!V.h.userStore.isLogged){t.yw.error(e);return}if(-2==a.statcode){t.yw.error("\u53E3\u4EE4\u9519\u8BEF");return}if((-1==b.statcode|| -2==b.statcode)&&0==a.statcode){t.yw.success("\u53E3\u4EE4\u6B63\u786E");return}t.yw.info("\u751F\u6D3B\u8BB0\u5F55\u5DF2\u66F4\u65B0"),d({action:S.b.Interaction,label:"\u5B9E\u65F6\u66F4\u65B0\u751F\u6D3B\u8BB0\u5F55\u89E6\u53D1 - ".concat(a.title)}),ai.r8&&console.log("note-change: ",JSON.stringify(a),"before: ",JSON.stringify(b))}c.current=(0,r.ZN)(a)}},[null==a?void 0:a.title,null==a?void 0:a.text,null==a?void 0:a.modified,null==a?void 0:a.weather,null==a?void 0:a.hide,null==a?void 0:a.isDeleted,null==a?void 0:a.topicId,null==a?void 0:a.statcode,])},aN={text:function(a){var b=a.value;return(0,n.jsx)("span",{className:"indent",children:b})}},aO=(0,b.Pi)(function(b){var e,i=(0,V.oR)(),z=i.userStore,A=i.noteStore,a=A.get(b.id)||ai.ZT,G=(0,s.useRouter)();(0,h.useEffect)(function(){"latest"===G.query.id&&G.replace({pathname:"/notes/".concat(a.nid),query:function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){aK(d,a,c[a])})}return d}({},(0,q.Z)(G.query,"id"))})},[a.nid]),(0,h.useEffect)(function(){A.relationMap.has(b.id)||A.fetchById(a.nid,b.answer,{force:!0})},[a.nid]),(0,aA.Q)(a.title,a.text),aM(a.id),aB(),(0,aA.Z)(a.title,"\u751F\u6D3B\u89C2\u5BDF\u65E5\u8BB0".concat(a.topic?" / ".concat(a.topic.name):"")),aD(a.music);var B,c=a.title,j=a.id,g=a.text,l=(0,h.useState)(""),C=l[0],H=l[1],m=(0,ai.D_)(g,{count:!0,length:150}),p=m.description,D=m.wordCount,r=(0,h.useState)(),E=r[0],I=r[1],J=(B=k(f().mark(function a(b){var c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.x.qa.getQuestionByID(b);case 2:(c=a.sent)&&I(c.question);case 4:case"end":return a.stop()}},a)})),function(a){return B.apply(this,arguments)});(0,h.useEffect)(function(){try{H("\u521B\u5EFA\u4E8E ".concat((0,aF.sG)(a.created,"YYYY-MM-DD dddd")).concat(a.modified?", \u4FEE\u6539\u4E8E ".concat((0,aF.sG)(a.modified,"YYYY-MM-DD dddd")):"",", \u5168\u6587\u5B57\u6570: ").concat(D,", \u9605\u8BFB\u6B21\u6570: ").concat(a.count.read,", \u559C\u6B22\u6B21\u6570: ").concat(a.count.like)),a.qa&&J(a.qa)}catch(b){}},[g,a.created,a.modified,a.count.read,a.count.like,D,]);var d=!!a.secret&&o()(a.secret).isAfter(new Date),u=(0,h.useMemo)(function(){return new Date(a.secret)},[a.secret]),v=a.secret?Intl.DateTimeFormat("zh-cn",{hour12:!1,hour:"numeric",minute:"numeric",year:"numeric",day:"numeric",month:"long"}).format(u):"";(0,h.useEffect)(function(){var a;return d&&(a=setTimeout(function(){t.yw.info("\u5237\u65B0\u4EE5\u67E5\u770B\u89E3\u9501\u7684\u6587\u7AE0",3)},+u- +new Date)),function(){clearTimeout(a)}},[d,u]);var y=(0,h.useState)(""),F=y[0],K=y[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(aG.p,{title:c,description:p,openGraph:{title:c,type:"article",description:p,article:{publishedTime:a.created,modifiedTime:a.modified||void 0}}}),(0,n.jsxs)(av,{title:c,date:a.created,tips:C,id:a.id,children:[d&&!z.isLogged?(0,n.jsxs)("p",{className:"text-center my-8",children:["\u8FD9\u7BC7\u6587\u7AE0\u6682\u65F6\u6CA1\u6709\u516C\u5F00\u5462\uFF0C\u5C06\u4F1A\u5728 ",v," \u89E3\u9501\uFF0C\u518D\u7B49\u7B49\u54E6"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"text-center my-8 text-light-brown dark:text-shizuku-text",hidden:0==a.statcode,children:[(0,n.jsx)("p",{hidden:-1!=a.statcode,children:"\u8FD9\u7BC7\u6587\u7AE0\u8BBE\u7F6E\u4E86\u8BBF\u95EE\u53E3\u4EE4\uFF0C\u4F60\u9700\u8981\u6B63\u786E\u56DE\u7B54\u4EE5\u4E0B\u95EE\u9898\u65B9\u53EF\u9605\u8BFB\u3002"}),(0,n.jsx)("p",{hidden:-2!=a.statcode,children:"\u53E3\u4EE4\u9519\u8BEF\uFF0C\u4F60\u9700\u8981\u6B63\u786E\u56DE\u7B54\u4EE5\u4E0B\u95EE\u9898\u65B9\u53EF\u9605\u8BFB\u3002"}),(0,n.jsxs)("p",{className:"text-left font-black",children:["\u3010Q\u3011",E]}),(0,n.jsx)(aI.Z,{placeholder:"Answer",value:F,type:"text",onChange:function(a){return K(a.target.value)}}),(0,n.jsx)("button",{className:"btn blue",type:"submit",onClick:function(){(0,w.YG)(),G.push("/notes/"+a.nid+"?answer="+F)},children:"\u63D0\u4EA4"})]}),(0,n.jsxs)(aH.Q.Provider,{value:(0,h.useMemo)(function(){return(0,aE.Gj)(a.images||[])},[a.images]),children:[d&&(0,n.jsxs)("span",{className:"flex justify-center -mb-3.5",children:["\u8FD9\u662F\u4E00\u7BC7\u975E\u516C\u5F00\u7684\u6587\u7AE0\u3002(\u5C06\u5728 ",v," \u89E3\u9501)"]}),(0,n.jsx)(am,{children:(0,n.jsxs)("article",{children:[(0,n.jsx)("h1",{className:"sr-only",children:c}),(0,n.jsx)(ax.U,{value:g,escapeHtml:!1,renderers:aN,toc:!0})]})})]})]}),(0,n.jsx)("div",{className:"pb-4"}),a.topic&&(0,n.jsx)(ak,{noteId:b.id,topic:a.topic}),(0,n.jsx)($,{id:b.id}),(0,n.jsx)("div",{className:"pb-4"}),(0,n.jsx)(X,{id:b.id})]}),!d&&(0,n.jsx)(an.B,{style:{minHeight:"unset",paddingTop:"0"},children:(0,n.jsx)(ay.pT,{id:j,allowComment:null===(e=a.allowComment)|| void 0===e||e},j)},"at"),(0,n.jsx)(az.SearchFAB,{})]})}),d=(0,b.Pi)(function(a){var c,f=(0,s.useRouter)(),d=(0,V.oR)().noteStore,b=d.get(null===(c=a)|| void 0===c?void 0:c.id),g=(0,u.Z)();if((0,h.useEffect)(function(){b||g()},[b]),"answer"in a){if((null==b?void 0:b.code)!= -1)return(0,n.jsx)(aO,{id:a.id,answer:null==a?void 0:a.answer});var e=function(b){var a=f.query.id;d.fetchById(isNaN(+a)?a:+a,b).catch(function(a){t.yw.error("\u5BC6\u7801\u9519\u8BEF")}).then(function(){g()})};return(0,n.jsx)(aa,{onSubmit:e})}return b?(0,n.jsx)(aO,{id:a.id}):(d.add(a),(0,n.jsx)(aw.g,{}))});d.getInitialProps=(l=k(f().mark(function a(b){var c,d,e;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.query.id,d=b.query.answer,"latest"!=c){a.next=6;break}return a.next=5,V.h.noteStore.fetchLatest();case 5:return a.abrupt("return",a.sent);case 6:return a.prev=6,a.next=9,V.h.noteStore.fetchById(isNaN(+c)?c:+c,d?String(d):void 0,{force:!0});case 9:return(e=a.sent).answer=d,a.abrupt("return",e);case 14:if(a.prev=14,a.t0=a.catch(6),!aL(a.t0,v.Lu)){a.next=22;break}if(!(403!==a.t0.status)){a.next=19;break}throw a.t0;case 19:return a.abrupt("return",{answer:d,id:+c});case 22:throw a.t0;case 23:case"end":return a.stop()}},a,null,[[6,14]])})),function(a){return l.apply(this,arguments)});var aP=d},175:function(a){a.exports={container:"NoteTimelineList_container__n0aHd",item:"NoteTimelineList_item__opW0U",list:"NoteTimelineList_list__VZYY0",active:"NoteTimelineList_active__Hc3Qo"}},18288:function(a){a.exports={"like-button":"LikeButton_like-button__RGgSw",checked:"LikeButton_checked__WPR18",animateHeart:"LikeButton_animateHeart__PH_NS",animateCircle:"LikeButton_animateCircle__6br16",animateHeartOut:"LikeButton_animateHeartOut__M__iI"}},12192:function(a){a.exports={icon:"ArticleAction_icon__gRaNV",root:"ArticleAction_root__ZBwKD"}}},function(a){a.O(0,[7187,3108,9106,5496,9635,1774,2226,4922,2468,1041,3147,298,9258,4742,1286,1761,9774,2888,179],function(){return a(a.s=43832)}),_N_E=a.O()}])