(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4742],{20444:function(e,b,a){"use strict";a.d(b,{v:function(){return p}});var f=a(62086),g=a(51626),h=a(98034),c=a(93236),i=a(32872),j=a(10861),k=a(45953),l=a(45079),d=a(80509),m=a.n(d);function n(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var o=function(a){var e=a.onClose,i=a.center,b=a.darkness,d=a.blur;return(0,c.useEffect)(function(){return document.documentElement.style.overflow="hidden",function(){document.documentElement.style.overflow=""}},[]),(0,f.jsxs)("div",{className:(0,g.Z)(m().container,i&&m().center),children:[(0,f.jsx)("div",{className:m().overlay,style:(0,h.Z)(b?{backgroundColor:"rgba(0,0,0,".concat(b,")")}:{},void 0!==d&&d?{backdropFilter:"blur(5px)"}:{}),onClick:e},"overlay"),a.child]})},p=(0,c.memo)(function(b){var c=b.show,d=b.childrenOutside,e=void 0!==d&&d,a=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(b,["show","childrenOutside"]);return(0,j.O)()?(0,f.jsxs)(k.K,{children:[(0,f.jsx)(l._,{className:"z-30",in:c,unmountOnExit:!0,timeout:{exit:500},children:(0,f.jsx)(o,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){n(d,a,c[a])})}return d}({},a,{child:e?null:a.children}))}),c&&e&&(0,f.jsx)("div",{className:"z-99 fixed inset-0 flex items-center justify-center",tabIndex:-1,onClick:a.onClose,children:(0,f.jsx)("div",{onClick:i.G7,tabIndex:-1,children:a.children})})]}):null})},45953:function(d,b,a){"use strict";a.d(b,{K:function(){return g}});var c=a(93236),e=a(19103),f=a(10861),g=(0,c.memo)(function(a){return(0,f.O)()?(0,e.createPortal)(a.children,document.body):null})},32476:function(c,b,a){"use strict";a.d(b,{I:function(){return h}});var d=a(62086),e=a(35658);function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){f(d,a,c[a])})}return d}var h=function(a,b){return function(c){var h=c.id,j=c.className,f=c.component,k=void 0===f?"div":f,i=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(c,["id","className","component"]);return(0,d.jsx)(e.ZP,g({in:!0,appear:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:0},i,{children:function(e){return(0,d.jsx)(k,{style:g({},a,b[e]),className:j,children:c.children})}}),h)}}},45079:function(e,b,a){"use strict";a.d(b,{"_":function(){return f}});var c=a(32476),d={transition:"opacity ".concat(300,"ms ease-out"),opacity:0},f=(0,c.I)(d,{entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}})},44742:function(g,c,a){"use strict";a.r(c),a.d(c,{SearchFAB:function(){return z},SearchHotKey:function(){return y},SearchOverlay:function(){return x},SearchPanel:function(){return w}});var h=a(62086),i=a(51626),d=a(20057),e=a(37937),j=a.n(e),b=a(93236),k=a(44050),l=a(32872),m=a(10298),n=a(20444),o=a(10609),p=a(74321),q=a(38325),f=a(53075),r=a.n(f);function s(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function t(){return(t=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var u=[+new Date,null],v=(0,d.Z)(function(a){return new Promise(function(b,d){var c=+new Date;if(!a){u=[c,null],b(null);return}l.x1.search.searchByAlgolia(a).then(function(a){c>u[0]&&(u=[c,a]),b(u[1])}).catch(function(a){d(a)})})},1e3),w=(0,b.memo)(function(q){var c=q.defaultKeyword,e=(0,b.useState)(c||""),f=e[0],x=e[1],s=(0,b.useDeferredValue)(f),g=(0,b.useState)(!1),k=g[0],y=g[1],l=(0,b.useState)([]),a=l[0],z=l[1],A=(0,p.e)().event;(0,b.useEffect)(function(){var a;y(!0),B(0),null===(a=v(s))|| void 0===a||a.then(function(a){if(A({action:o.b.Interaction,label:"\u641C\u7D22\u89E6\u53D1\uFF1A".concat(s)}),!a){y(!1),z([]);return}var b=a.data;if(!b){y(!1);return}z(b.map(function(a){switch(a.type){case"post":return{title:a.title,subtitle:a.category.name,id:a.id,url:"/posts/".concat(a.category.slug,"/").concat(a.slug)};case"note":return{title:a.title,subtitle:"\u751F\u6D3B\u8BB0\u5F55",id:a.id,url:"/notes/".concat(a.nid)};case"page":return{title:a.title,subtitle:"\u9875\u9762",id:a.id,url:"/pages/".concat(a.slug)}}})),y(!1)}).catch(function(a){console.log(a),y(!1)})},[s]);var n=(0,b.useState)(0),t=n[0],B=n[1],u=(0,b.useRef)(null),C=(0,b.useRef)(!1),w=(0,b.useCallback)(function(f){if(u.current){var b,c,e=u.current,d=function(){C.current||(A({action:o.b.Interaction,label:"\u641C\u7D22\u89E6\u53D1\u952E\u76D8\u64CD\u4F5C\uFF1A".concat(f.key)}),C.current=!0)};switch(f.key){case"Enter":null===(c=e.children.item(t).children.item(0))|| void 0===c||c.click(),d();break;case"ArrowDown":B(function(c){var b=c+1;return b?b%a.length:0}),d();break;case"ArrowUp":B(function(c){var b=c-1;return b<0?a.length-1:b}),d()}null===(b=e.children.item(t))|| void 0===b||b.scrollIntoView({behavior:"smooth"})}},[t,a.length]);return(0,h.jsxs)("div",{className:r().root,onKeyDown:w,role:"dialog",children:[(0,h.jsx)("input",{autoFocus:!0,className:"p-4 px-5 w-full text-[16px] leading-4 bg-transparent",placeholder:"Search...",defaultValue:c,value:f,onChange:function(a){return x(a.target.value)},onKeyDown:function(a){("ArrowDown"===a.key||"ArrowUp"===a.key||"Enter"===a.key)&&a.preventDefault()}}),(0,h.jsx)("div",{className:(0,i.Z)(r()["status-bar"],k&&r().loading)}),(0,h.jsx)("div",{className:"flex-grow flex-shrink relative overflow-overlay",children:(0,h.jsx)("ul",{className:"py-4 px-3 h-full",ref:u,children:0!==a.length||k?a.map(function(a,b){return(0,h.jsx)("li",{onMouseOver:(0,d.Z)(function(){B(b)},40),children:(0,h.jsx)(j(),{href:a.url,children:(0,h.jsxs)("a",{className:(0,i.Z)(r().item,b===t&&r().active),children:[(0,h.jsx)("span",{className:"block flex-1 flex-shrink-0 truncate",children:a.title}),(0,h.jsx)("span",{className:"text-gray-2 block text-deepgray flex-grow-0 flex-shrink-0",children:a.subtitle})]})})},a.id)}):(0,h.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,h.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,h.jsx)(m.tL,{}),(0,h.jsx)("span",{children:"\u65E0\u5185\u5BB9"})]})})})})]})}),x=function(a){var b=t({},a);return(0,k.bx)("Escape",[k.Dg.None],function(){a.onClose()},"\u5173\u95ED\u641C\u7D22\u6846",{hiddenInPanel:!0}),(0,h.jsx)(n.v,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){s(d,a,c[a])})}return d}({childrenOutside:!0,center:!0},b,{children:(0,h.jsx)(w,{})}))},y=(0,b.memo)(function(){var e=(0,p.e)().event,c=(0,b.useState)(!1),d=c[0],f=c[1],a=function(){e({action:o.b.Click,label:"cmd+k"}),f(!0)};return(0,k.bx)("K",[k.Dg.Command],a,"\u641C\u7D22"),(0,k.bx)("K",[k.Dg.Control],a,"\u641C\u7D22",{hiddenInPanel:!0}),(0,k.bx)("/",[k.Dg.None],a,"\u641C\u7D22"),(0,h.jsx)(x,{show:d,onClose:function(){return f(!1)}})}),z=(0,b.memo)(function(){var a=(0,b.useState)(!1),c=a[0],d=a[1],e=(0,q.oR)().actionStore,f=(0,b.useRef)(Symbol()),g=(0,p.e)().event;return(0,b.useEffect)(function(){c&&g({action:o.b.Impression,label:"\u641C\u7D22\u6846\u88AB\u5524\u9192"})},[c]),(0,b.useEffect)(function(){e.removeActionBySymbol(f.current);var a={icon:(0,h.jsx)(m.qh,{}),id:f.current,onClick:function(){d(!0)}};return requestAnimationFrame(function(){e.appendActions(a)}),function(){e.removeActionBySymbol(f.current)}},[]),(0,h.jsx)(x,{show:c,onClose:function(){return d(!1)}})})},10861:function(c,b,a){"use strict";a.d(b,{O:function(){return f}});var d=a(93236),e=a(32872),f=function(){var a=(0,d.useState)((0,e.S_)()),b=a[0],c=a[1];return(0,d.useEffect)(function(){c(!0)},[]),b}},80509:function(a){a.exports={container:"Overlay_container__wJ28a",center:"Overlay_center__LGJA3",overlay:"Overlay_overlay__PVnXL"}},53075:function(a){a.exports={root:"Search_root__IpdXg",item:"Search_item__Fp97E",active:"Search_active__sQC8E","status-bar":"Search_status-bar__Lvrc4",loading:"Search_loading__BuQGY",move:"Search_move__NVEht"}}}])